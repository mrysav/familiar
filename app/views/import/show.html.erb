<div class="col-md-10 col-md-offset-1">
   
<h3>Import Data</h3>   
 
<%= form_tag('/import/', multipart: true, :accept => 'text/xml', :role => :form) do %>

<input type="hidden" id="type-val" name="type" value="gedcom">

<%= label_tag :file, 'Select file to import' %>
<div class="input-group">
    <%= file_field_tag :file, :class => "form-control" %>
    <div class="input-group-btn">
        <button id="type-select" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">GEDCOM 5 <span class="caret"></span></button>
        <ul id="type-menu" class="dropdown-menu">
            <li value="gedcom"><a href="#">GEDCOM 5</a></li>
            <li value="gramps"><a href="#">Gramps XML</a></li>
            <li value="json"><a href="#">JSON</a></li>
        </ul>
        <%= submit_tag "Upload", :class => "btn btn-default" %>
    </div>
</div>

<h4>Options</h4>
<div class="checkbox">
    <label>
        <input name="merge" type="checkbox"><strong>Attempt matching</strong></input><br/>
        Checking this box will attempt to match people in the imported file to people already in the database instead of creating a new database entry for everyone.<br/>
        <strong>Warning:</strong> this may have unpredictable side-effects.
    </label>
</div>

<% end %>

<script type="text/javascript">
$('#type-menu li').click(function(e){
    e.preventDefault();
    var selected = $(this).attr('value');
    var rname = $(this).text();
    console.log(selected);
    $('#type-val').val(selected);  
    $('#type-select').html(rname + '<span class="caret"></span>');  
});
</script>

</div>